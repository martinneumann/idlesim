/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};function e(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}function r(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function n(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function i(t,e){for(var r=0,n=e.length,i=t.length;r<n;r++,i++)t[i]=e[r];return t}function o(t){return"function"==typeof t}Object.create,Object.create;var s,c=((s=function(t){var e;e=this,Error.call(e),e.stack=(new Error).stack,this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}).prototype=Object.create(Error.prototype),s.prototype.constructor=s,s);function a(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var u=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}var e;return t.prototype.unsubscribe=function(){var t,e,s,a,u;if(!this.closed){this.closed=!0;var l=this._parentage;if(l)if(this._parentage=null,Array.isArray(l))try{for(var d=r(l),f=d.next();!f.done;f=d.next())f.value.remove(this)}catch(e){t={error:e}}finally{try{f&&!f.done&&(e=d.return)&&e.call(d)}finally{if(t)throw t.error}}else l.remove(this);var p=this.initialTeardown;if(o(p))try{p()}catch(t){u=t instanceof c?t.errors:[t]}var v=this._teardowns;if(v){this._teardowns=null;try{for(var y=r(v),b=y.next();!b.done;b=y.next()){var _=b.value;try{h(_)}catch(t){u=null!=u?u:[],t instanceof c?u=i(i([],n(u)),n(t.errors)):u.push(t)}}}catch(t){s={error:t}}finally{try{b&&!b.done&&(a=y.return)&&a.call(y)}finally{if(s)throw s.error}}}if(u)throw new c(u)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)h(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=null!==(r=this._teardowns)&&void 0!==r?r:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&a(e,t)},t.prototype.remove=function(e){var r=this._teardowns;r&&a(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}();function l(t){return t instanceof u||t&&"closed"in t&&o(t.remove)&&o(t.add)&&o(t.unsubscribe)}function h(t){o(t)?t():t.unsubscribe()}u.EMPTY;var d=null,f=null,p=void 0,v=!1,y=!1,b={setTimeout:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=b.delegate;return((null==r?void 0:r.setTimeout)||setTimeout).apply(void 0,i([],n(t)))},clearTimeout:function(t){var e=b.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function _(t){b.setTimeout((function(){if(!d)throw t;d(t)}))}function m(){}var w=g("C",void 0,void 0);function g(t,e,r){return{kind:t,value:e,error:r}}var k=function(t){function r(e){var r=t.call(this)||this;return r.isStopped=!1,e?(r.destination=e,l(e)&&e.add(r)):r.destination=A,r}return e(r,t),r.create=function(t,e,r){return new x(t,e,r)},r.prototype.next=function(t){this.isStopped?M(function(t){return g("N",t,void 0)}(t),this):this._next(t)},r.prototype.error=function(t){this.isStopped?M(g("E",void 0,t),this):(this.isStopped=!0,this._error(t))},r.prototype.complete=function(){this.isStopped?M(w,this):(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(t){this.destination.next(t)},r.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(u),x=function(t){function r(e,r,n){var i,s=t.call(this)||this;if(o(e))i=e;else if(e){var c;i=e.next,r=e.error,n=e.complete,s&&y?(c=Object.create(e)).unsubscribe=function(){return s.unsubscribe()}:c=e,i=null==i?void 0:i.bind(c),r=null==r?void 0:r.bind(c),n=null==n?void 0:n.bind(c)}return s.destination={next:i?S(i,s):m,error:S(null!=r?r:E,s),complete:n?S(n,s):m},s}return e(r,t),r}(k);function S(t,e){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];try{t.apply(void 0,i([],n(r)))}catch(t){if(v){if(!e._syncErrorHack_isSubscribing)throw t;e.__syncError=t}else _(t)}}}function E(t){throw t}function M(t,e){var r=f;r&&b.setTimeout((function(){return r(t,e)}))}var A={closed:!0,next:m,error:E,complete:m},I="function"==typeof Symbol&&Symbol.observable||"@@observable";function T(t){return t}function P(t){return 0===t.length?T:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var j=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n,i=(n=t)&&n instanceof k||function(t){return t&&o(t.next)&&o(t.error)&&o(t.complete)}(n)&&l(n)?t:new x(t,e,r);if(v)this._deprecatedSyncErrorSubscribe(i);else{var s=this.operator,c=this.source;i.add(s?s.call(i,c):c?this._subscribe(i):this._trySubscribe(i))}return i},t.prototype._deprecatedSyncErrorSubscribe=function(t){var e=t;e._syncErrorHack_isSubscribing=!0;var r=this.operator;if(r)t.add(r.call(t,this.source));else try{t.add(this._subscribe(t))}catch(t){e.__syncError=t}for(var n=e;n;){if("__syncError"in n)try{throw n.__syncError}finally{t.unsubscribe()}n=n.destination}e._syncErrorHack_isSubscribing=!1},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var r=this;return new(e=O(e))((function(e,n){var i;i=r.subscribe((function(e){try{t(e)}catch(t){n(t),null==i||i.unsubscribe()}}),n,e)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[I]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length?P(t)(this):this},t.prototype.toPromise=function(t){var e=this;return new(t=O(t))((function(t,r){var n;e.subscribe((function(t){return n=t}),(function(t){return r(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();function O(t){var e;return null!==(e=null!=t?t:p)&&void 0!==e?e:Promise}var $,C=function(t){function r(e,r){return t.call(this)||this}return e(r,t),r.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},r}(u),D={setInterval:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=D.delegate;return((null==r?void 0:r.setInterval)||setInterval).apply(void 0,i([],n(t)))},clearInterval:function(t){var e=D.delegate;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},q=function(t){function r(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n.pending=!1,n}return e(r,t),r.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},r.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),D.setInterval(t.flush.bind(t,this),r)},r.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return e;D.clearInterval(e)},r.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(t,e){var r,n=!1;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},r.prototype.unsubscribe=function(){if(!this.closed){var e=this.id,r=this.scheduler,n=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,a(n,this),null!=e&&(this.id=this.recycleAsyncId(r,e,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},r}(C),z={now:function(){return(z.delegate||Date).now()},delegate:void 0},H=function(){function t(e,r){void 0===r&&(r=t.now),this.schedulerActionCtor=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.schedulerActionCtor(this,t).schedule(r,e)},t.now=z.now,t}(),N=new(function(t){function r(e,r){void 0===r&&(r=H.now);var n=t.call(this,e,r)||this;return n.actions=[],n._active=!1,n._scheduled=void 0,n}return e(r,t),r.prototype.flush=function(t){var e=this.actions;if(this._active)e.push(t);else{var r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},r}(H))(q);!function(t){let e,r;function n(t){return t.charAt(0).toUpperCase()+t.slice(1)}function i(){let t="aeiouäöüeë",e="bcdfghjklmnpqrstvwxyz",r="",i="";for(let n=0;n<Math.floor(10*Math.random())+6;n++)(Math.floor(2*Math.random())+1)%2==0?r+=t[Math.floor(Math.random()*t.length)]:r+=e[Math.floor(Math.random()*e.length)];for(let r=0;r<Math.floor(15*Math.random())+6;r++)(Math.floor(2*Math.random())+1)%2==0?i+=t[Math.floor(Math.random()*t.length)]:i+=e[Math.floor(Math.random()*e.length)];return r=n(r),i=n(i),r+" "+i}!function(t){t[t.idle=1]="idle",t[t.walk=2]="walk",t[t.eat=3]="eat",t[t.converse=4]="converse",t[t.drink=5]="drink",t[t.pick_up=6]="pick_up",t[t.fell=7]="fell",t[t.build=8]="build",t[t.marry=9]="marry",t[t.bear_child=10]="bear_child",t[t.sleep=11]="sleep",t[t.search=12]="search"}(e||(e={})),function(t){t[t.edible=1]="edible",t[t.drinkable=2]="drinkable",t[t.poisoned=3]="poisoned",t[t.weapon=4]="weapon",t[t.building_material=5]="building_material"}(r||(r={}));class s{constructor(t,r,n){this.name="Unnamed Person",this.age=0,this.movement_speed=1+3*Math.random(),this.position={x:1,y:1,z:1},this.hunger=100,this.thirst=100,this.relationships=[],this.inventory=[],this.memory=[],this.current_perceptions=[],this.intention=e.idle,this.current_action=e.idle,this.name=t,this.birthday=r,this.position=n,console.log(`A person by the name of ${this.name} now exists.`)}body_functions(t){this.hunger,this.thirst}decide(){return this.thirst<50||this.hunger<50?(console.log(`${this.name} is hungry.`),void(this.intention=e.eat)):void 0}perceive(t,e,r){this.current_perceptions.push(t,e,r)}do_action(){let t=1;switch(this.intention){case e.idle:console.log(`${this.name} decides to do nothing in particular for a bit.`);break;case e.drink:let n=this.inventory.find((t=>t.descriptors.find((t=>t===r.drinkable))));n?(this.body_functions(-30),t=0,console.log(`${name} drinks the ${n.name}.`),this.inventory.splice(this.inventory.findIndex((t=>t==n)),1)):console.log(`${this.name} tried to drink, but cannot find anything drinkable.`);break;case e.eat:t=0;break;case e.walk:case e.converse:case e.pick_up:case e.build:case e.bear_child:case e.marry:}this.body_functions(t)}}new class{constructor(){this.people=[],this.objects=[],this.plants=[],this.name=i(),console.log(`Somehow, somewhere, a world created itself. It is called ${this.name} by those who inhabit it.`);for(let t=0;t<(10,30,Math.floor(20*Math.random())+10);t++)this.people.push(new s(i(),new Date(Date.now()),{x:1,y:1,z:1}));this.simulation_loop()}simulation_loop(){console.log("Time has started to affect the world."),function(t,e,r){void 0===t&&(t=0),void 0===r&&(r=N);var n,i=-1;return null!=e&&((n=e)&&o(n.schedule)?r=e:i=e),new j((function(e){var n=function(t){return t instanceof Date&&!isNaN(t)}(t)?+t-r.now():t;n<0&&(n=0);var o=0;return r.schedule((function(){e.closed||(e.next(o++),0<=i?this.schedule(void 0,i):e.complete())}),n)}))}(1e4,1e4).subscribe((()=>{this.people.forEach((t=>{t.perceive(this.objects,this.people,this.plants),t.decide(),t.do_action()})),console.log("Another hour has passed.")}))}}}($||($={}))})();